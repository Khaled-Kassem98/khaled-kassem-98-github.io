<!doctype html>
<html lang="ar">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…Ù† Ø§Ù„Ù…ÙˆØ¬Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨Øª â€” Ø±Ø­Ù„Ø© Ø§Ù„ØµÙˆØª Ø§Ù„Ø±Ù‚Ù…ÙŠ</title>
  <meta name="description"
    content="Ù…Ù† Ø§Ù„Ù…ÙˆØ¬Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨Øª â€” Ù…ÙˆÙ‚Ø¹ ØªÙØ§Ø¹Ù„ÙŠ Ù„Ø´Ø±Ø­ Ø§Ù„ØµÙˆØª Ø§Ù„Ø±Ù‚Ù…ÙŠØŒ Ø§Ù„ØªÙ‚Ø·ÙŠØ¹ØŒ Ø§Ù„ØªÙƒÙ…ÙŠØ©ØŒ ÙˆØ¶ØºØ· Ø§Ù„ØµÙˆØª." />
  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&family=Poppins:wght@400;600&display=swap"
    rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="container">
    <!-- Header -->
    <header>
      <div class="logo">
        <img src="assets/logo.webp" alt="logo">
        <div>
          <div style="font-weight:800;color:var(--muted);font-size:18px">Ù…Ù† Ø§Ù„Ù…ÙˆØ¬Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨Øª</div>
          <div style="font-size:12px;color:#9fb9d0">From Wave to Bit â€” Digital Audio</div>
        </div>
      </div>
      <nav>
        <a href="#home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="#journey">Ø±Ø­Ù„Ø© Ø§Ù„ØµÙˆØª</a>
        <a href="#lab">Ù…Ø®ØªØ¨Ø± Ø§Ù„ØªÙ‚Ø·ÙŠØ¹</a>
        <a href="#compression">Ø¶ØºØ· Ø§Ù„ØµÙˆØª</a>
      </nav>
    </header>

    <!-- HERO / HOME -->
    <main id="home" class="hero" style="position:relative;
             display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;
             padding:60px 20px;color:#e2e8f0;min-height:60vh;overflow:hidden;border-radius:12px;">
      <video autoplay muted loop playsinline
        style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1;opacity:0.25;">
        <source src="assets/intro.mp4" type="video/mp4">
        Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.
      </video>
      <div style="max-width:700px; z-index:1;">
        <h1 style="font-size:clamp(20px,3vw,30px);color:#38bdf8;margin-bottom:10px;line-height:1.6;font-weight:700;">
          ğŸ”Š Ù…Ù† Ø§Ù„Ù…ÙˆØ¬Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙØª: Ø±Ø­Ù„Ø© Ø§Ù„ØµÙˆØª Ø§Ù„Ø±Ù‚Ù…ÙŠ
        </h1>
        <p style="font-size:16px;color:#e2e8f0;line-height:1.8;margin:0 auto 18px;max-width:650px;
          text-shadow:0 2px 6px rgba(0,0,0,0.4);">
          Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ø·Ù„Ø§Ø¨ Ù…Ù‚Ø±Ø± <strong style='color:#38bdf8;'>Ù†Ø¸Ù… Ø§Ù„ÙˆØ³Ø§Ø¦Ø· Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©</strong> â€”
          Ø§Ø³ØªÙƒØ´Ù ÙƒÙŠÙ ÙŠØªØ­ÙˆÙ„ Ø§Ù„ØµÙˆØª Ù…Ù† Ù…ÙˆØ¬Ø© Ø¥Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø±Ù‚Ù…ÙŠØ©ØŒ ÙˆØªØ¹Ø±Ù‘Ù Ø¹Ù„Ù‰ Ø®Ø·ÙˆØ§Øª
          <strong style='color:#38bdf8;'>Ø§Ù„ØªÙ‚Ø·ÙŠØ¹</strong> Ùˆ<strong style='color:#38bdf8;'>Ø§Ù„ØªÙƒÙ…ÙŠØ©</strong>ØŒ
          ÙˆØ§Ø·Ù‘Ù„Ø¹ Ø¹Ù„Ù‰ ØªÙ‚Ù†ÙŠØ§Øª <strong style='color:#38bdf8;'>Ø¶ØºØ· Ø§Ù„ØµÙˆØª</strong>.
        </p>
        <div style="margin-top:22px;">
          <button class="btn" onclick="scrollToSection('journey')" style="padding:10px 26px; font-size:15px; color:#0f172a;background:#38bdf8; border:none;
             border-radius:8px;  cursor:pointer;transition:0.3s;">
            Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ
          </button>
        </div>
        <div style="margin-top:14px; font-size:13px; color:#cbd5e1;">
          Ø§Ù„ÙØµÙ„ Ø§Ù„Ø±Ø§Ø¨Ø¹ â€” Ø§Ù„ØµÙˆØª Ø§Ù„Ø±Ù‚Ù…ÙŠ (<span style="color:#38bdf8;">BMM601</span>)
        </div>
      </div>
    </main>

    <!-- Journey -->
    <section id="journey" class="card" aria-labelledby="journey-title" style="text-align:center;">
      <h2 id="journey-title" class="section-title">ğŸ§ Ø±Ø­Ù„Ø© Ø§Ù„ØµÙˆØª Ù…Ù† Ø§Ù„Ù‡ÙˆØ§Ø¡ Ø¥Ù„Ù‰ Ø§Ù„Ø¨Øª</h2>
      <!-- Ø´Ø±Ø­ Ø±Ø­Ù„Ø© Ø§Ù„ØµÙˆØª -->
      <div style="max-width:700px; margin:0 auto 24px;text-align:center;color:#dbeafe;line-height:1.9;font-size:17px;">
        <p style="margin-bottom:18px;">
          Ø§Ù„ØµÙˆØª Ù…ÙˆØ¬Ø© Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠØ© ØªÙ†ØªØ´Ø± ÙÙŠ Ø§Ù„Ù‡ÙˆØ§Ø¡. Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„Ù‡Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø°Ù†ØŒ ØªÙØ­ÙˆÙ‘ÙÙ„ Ø§Ù„Ø°Ø¨Ø°Ø¨Ø§Øª Ø¥Ù„Ù‰ Ø¥Ø´Ø§Ø±Ø§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©
          ØªÙ†ØªÙ‚Ù„ Ø¹Ø¨Ø± <strong style='color:#38bdf8;'>Ø§Ù„Ø¹ØµØ¨ Ø§Ù„Ø³Ù…Ø¹ÙŠ</strong> Ø¥Ù„Ù‰ Ø§Ù„Ø¯Ù…Ø§Øº Ù„ÙŠØªÙ… ØªÙØ³ÙŠØ±Ù‡Ø§ ÙƒØ£ØµÙˆØ§Øª Ù…ÙÙ‡ÙˆÙ…Ø©.
        </p>
        <p style="margin-bottom:16px;">
          ÙŠÙ„ØªÙ‚Ø· <strong style='color:#38bdf8;'>Ø§Ù„Ø­Ø§Ø³ÙˆØ¨</strong> Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙˆØ¬Ø© ÙˆÙŠØ±Ù‚Ù…Ù†Ù‡Ø§ Ø¹Ø¨Ø± Ø¹Ù…Ù„ÙŠØªÙŠ
          <strong style='color:#38bdf8;'>Ø§Ù„ØªÙ‚Ø·ÙŠØ¹</strong> Ùˆ<strong style='color:#38bdf8;'>Ø§Ù„ØªÙƒÙ…ÙŠØ©</strong>
          Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ…Ø«ÙŠÙ„ Ø±Ù‚Ù…ÙŠ Ø¯Ù‚ÙŠÙ‚ ÙŠÙ…ÙƒÙ† ØªØ®Ø²ÙŠÙ†Ù‡ Ø£Ùˆ Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡.
        </p>

        <p style="font-size:15px;color:#94a3b8; margin-top:22px;line-height:1.8;">
          ğŸ§ Ø§Ù„Ø±Ø³Ù… Ø£Ø¯Ù†Ø§Ù‡ ÙŠÙˆØ¶Ù‘Ø­ Ø±Ø­Ù„Ø© Ø§Ù„ØµÙˆØª Ø¯Ø§Ø®Ù„ Ø§Ù„Ø£Ø°Ù† â€” Ù…Ø±Ù‘Ø± Ø§Ù„Ù…Ø¤Ø´Ø± ÙÙˆÙ‚ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ù„Ù…Ø¹Ø±ÙØ© ÙˆØ¸Ø§Ø¦ÙÙ‡Ø§.
        </p>
      </div>
      <!-- Ø§Ù„Ø±Ø³Ù… Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ Ù…ØµØºÙ‘Ø± -->
      <div class="ear-stage" id="earStage" style="position:relative;max-width:600px;margin:30px auto;border-radius:12px;overflow:hidden;
        background: rgba(255, 255, 255, 0.85);padding:25px 0;">
        <img src="assets/ear.webp" alt="Ø±Ø³Ù… ÙˆØ§Ù‚Ø¹ÙŠ Ù„Ù„Ø£Ø°Ù† Ø§Ù„Ø¨Ø´Ø±ÙŠØ©"
          style="width:100%;height:auto;display:block;border-radius:12px;">
        <!-- Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© -->
        <div class="hotspot" data-name="Ø§Ù„ØµÙŠÙˆØ§Ù†" data-text="ÙŠØ¬Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¬Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© ÙˆÙŠÙˆØ¬Ù‡Ù‡Ø§ Ù†Ø­Ùˆ Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø³Ù…Ø¹ÙŠØ© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©."
          style="top:32%; left:14%; width:8%; height:12%;"></div>
        <div class="hotspot" data-name="Ù‚Ù†Ø§Ø© Ø§Ù„Ø³Ù…Ø¹" data-text="ØªÙ†Ù‚Ù„ Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© Ù…Ù† Ø§Ù„ØµÙŠÙˆØ§Ù† Ø¥Ù„Ù‰ ØºØ´Ø§Ø¡ Ø§Ù„Ø·Ø¨Ù„."
          style="top:45%; left:33%; width:9%; height:6%;"></div>
        <div class="hotspot" data-name="ØºØ´Ø§Ø¡ Ø§Ù„Ø·Ø¨Ù„"
          data-text="ØºØ´Ø§Ø¡ Ø±Ù‚ÙŠÙ‚ ÙŠÙ‡ØªØ² Ø¹Ù†Ø¯Ù…Ø§ ØªØµÙ„Ù‡ Ø§Ù„Ù…ÙˆØ¬Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© ÙˆÙŠÙ†Ù‚Ù„ Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø¸ÙŠÙ…Ø§Øª."
          style="top:47%; left:49%; width:6%; height:10%;"></div>
        <div class="hotspot" data-name="Ø§Ù„Ø¹Ø¸ÙŠÙ…Ø§Øª Ø§Ù„Ø«Ù„Ø§Ø«"
          data-text="Ø§Ù„Ù…Ø·Ø±Ù‚Ø© ÙˆØ§Ù„Ø³Ù†Ø¯Ø§Ù† ÙˆØ§Ù„Ø±ÙƒØ§Ø¨: ØªØ¶Ø®Ù‘Ù… Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø² ÙˆØªÙ†Ù‚Ù„Ù‡ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø°Ù† Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©."
          style="top:47%; left:58%; width:8%; height:10%;"></div>
        <div class="hotspot" data-name="Ø§Ù„Ù‚ÙˆÙ‚Ø¹Ø©"
          data-text="ØªØ­ÙˆÙ‘Ù„ Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²Ø§Øª Ø¥Ù„Ù‰ Ø³ÙŠØ§Ù„Ø§Øª Ø¹ØµØ¨ÙŠØ© Ø¹Ø¨Ø± Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø´Ø¹Ø±ÙŠØ© Ø§Ù„ØªÙŠ ØªÙ†Ù‚Ù„ Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¯Ù…Ø§Øº Ø¹Ø¨Ø± Ø§Ù„Ø¹ØµØ¨ Ø§Ù„Ø³Ù…Ø¹ÙŠ."
          style="top:55%; left:70%; width:9%; height:12%;"></div>
        <div class="hotspot" data-name="Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø´Ø¹Ø±ÙŠØ©"
          data-text="Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø´Ø¹Ø±ÙŠØ© ÙÙŠ Ø§Ù„Ø£Ø°Ù† Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© ØªØ³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²Ø§Øª ÙˆØªØ­ÙˆÙ„Ù‡Ø§ Ø¥Ù„Ù‰ Ø³ÙŠØ§Ù„Ø§Øª Ø¹ØµØ¨ÙŠØ© ØªÙØ±Ø³Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø¯Ù…Ø§Øº Ø¹Ø¨Ø± Ø§Ù„Ø¹ØµØ¨ Ø§Ù„Ø³Ù…Ø¹ÙŠ."
          style="top:80%; left:60%; width:10%; height:10%;"></div>
        <div class="popup" id="earPopup">
          <h2 id="earTitle"></h2>
          <p id="earText"></p>
        </div>
      </div>
      <style>
        .ear-stage .hotspot {
          position: absolute;
          border-radius: 50%;
          background: rgba(34, 197, 94, 0.25);
          cursor: pointer;
          transition: all .25s ease;
        }

        .ear-stage .hotspot:hover {
          background: rgba(34, 197, 94, 0.45);
          transform: scale(1.1);
        }

        #earPopup {
          position: absolute;
          display: none;
          min-width: 150px;
          background: rgba(11, 18, 32, 0.95);
          color: #fff;
          padding: 6px 8px;
          border-radius: 8px;
          font-size: 12px;
          line-height: 1.4;
          z-index: 10;
          box-shadow: 0 4px 10px #0005;
        }

        #earPopup h2 {
          font-size: 13px;
          margin: 0 0 3px;
          color: #22c55e;
        }

        #earPopup::after {
          content: '';
          position: absolute;
          bottom: -6px;
          right: 20px;
          border-width: 6px;
          border-style: solid;
          border-color: #0b1220 transparent transparent transparent;
        }
      </style>
      <script>
        const popup = document.getElementById('earPopup');
        const title = document.getElementById('earTitle');
        const text = document.getElementById('earText');
        const stage = document.getElementById('earStage');
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ÙˆØ¶Ø¹ Ø«Ø§Ø¨Øª Ù†Ø³Ø¨ÙŠ Ø£Ø³ÙÙ„ Ù…Ù†ØªØµÙ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
        function showPopup(el) {
          const stageRect = stage.getBoundingClientRect();
          const rect = el.getBoundingClientRect();
          title.textContent = el.dataset.name;
          text.textContent = el.dataset.text;
          popup.style.display = 'block';
          popup.style.top = (rect.top - stageRect.top - 50) + 'px';
          popup.style.left = (rect.left - stageRect.left + rect.width / 2 - popup.offsetWidth / 2) + 'px';
        }
        function hidePopup() {
          popup.style.display = 'none';
        }
        document.querySelectorAll('.ear-stage .hotspot').forEach(el => {
          // Ø²ÙŠØ§Ø¯Ø© Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ© Ù‚Ù„ÙŠÙ„Ù‹Ø§ Ù„ØªØ¬Ù†Ø¨ ØªÙ‚Ø·Ø¹ Ø§Ù„Ù…Ø¤Ø´Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø£Ø·Ø±Ø§Ù
          el.style.padding = '6px';
          el.style.margin = '-6px';

          el.addEventListener('mouseenter', () => showPopup(el));
          el.addEventListener('mouseleave', hidePopup);
        });
        // Ù…Ù†Ø¹ Ø§Ù„ÙˆÙ…ÙŠØ¶ Ø§Ù„Ù†Ø§ØªØ¬ Ø¹Ù† ØªÙƒØ±Ø§Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø±ÙƒØ© Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„Ø¹Ù†ØµØ±
        stage.addEventListener('mousemove', e => {
          if (!popup.style.display || popup.style.display === 'none') return;
          e.stopPropagation();
        });
      </script>
    </section>

    <!-- SECTION: Sampling & Quantization Lab -->
    <section id="lab" class="card" aria-labelledby="lab-title" style="padding:60px 20px; text-align:center;">
      <h2 id="lab-title" class="section-title" style="color:#38bdf8; margin-bottom:20px;">
        ğŸ§ª Ù…Ø®ØªØ¨Ø± Ø§Ù„ØªÙ‚Ø·ÙŠØ¹ ÙˆØ§Ù„ØªÙƒÙ…ÙŠØ© (Sampling & Quantization Lab)
      </h2>
      <!-- Ù†Øµ ØªÙ…Ù‡ÙŠØ¯ÙŠ -->
      <p style="max-width:750px;margin:auto;color:#cbd5e1;line-height:1.9;font-size:17px;margin-bottom:32px;">
        ÙŠÙˆØ¶Ù‘Ø­ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø®ØªØ¨Ø± ØªØ£Ø«ÙŠØ± ÙƒÙ„Ù‘Ù Ù…Ù† <strong style="color:#38bdf8;">Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙ‚Ø·ÙŠØ¹ (Sampling Rate)</strong>
        Ùˆ<strong style="color:#38bdf8;">Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ØªØ§Øª (Bit Depth)</strong> Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø© Ø§Ù„ØµÙˆØª.
        ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ… Ø£Ø¯Ù†Ø§Ù‡ ÙˆÙ…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„ØªØºÙŠÙ‘Ø±Ø§Øª Ø¹Ù„Ù‰ Ø´ÙƒÙ„ Ø§Ù„Ù…ÙˆØ¬Ø© ÙˆØ¬ÙˆØ¯Ø© Ø§Ù„ØµÙˆØª Ø§Ù„Ù†Ø§ØªØ¬.
      </p>
      <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ -->
      <div style="max-width:900px;margin:auto;background:#0f172a;border-radius:12px;padding:30px;
        box-shadow:0 4px 20px #00000040;">
        <!-- Sliders -->
        <div style="margin-bottom:30px;text-align:right;">
          <label for="sampleRate" style="color:#93c5fd;font-size:15px;">Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙ‚Ø·ÙŠØ¹ (Hz): <span
              id="rateValue">22050</span></label>
          <input type="range" id="sampleRate" min="8000" max="44100" step="1000" value="22050"
            style="width:100%;margin:10px 0;">
          <label for="bitDepth" style="color:#93c5fd;font-size:15px;">Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ØªØ§Øª (Bit Depth): <span
              id="bitValue">8</span></label>
          <input type="range" id="bitDepth" min="4" max="16" step="1" value="8" style="width:100%;margin:10px 0;">
        </div>
        <!-- Canvas Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¬Ø© -->
        <canvas id="waveCanvas" width="850" height="200"
          style="width:100%;border-radius:8px;background:#1e293b;"></canvas>
        <!-- Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
        <p id="observation" style="color:#94a3b8;margin-top:20px;font-size:15px;">ØºÙŠÙ‘Ø± Ø§Ù„Ù‚ÙŠÙ… Ø£Ø¹Ù„Ø§Ù‡ Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ø«Ø±Ù‡Ø§ Ø¹Ù„Ù‰
          Ø§Ù„Ù…ÙˆØ¬Ø©.</p>
      </div>
      <!-- ÙÙ‚Ø±Ø© Ø¹Ù„Ù…ÙŠØ© -->
      <div style=" max-width:820px; margin:40px auto;color:#dbeafe;font-size:17px;line-height:2;
        text-align:right;direction:rtl;">
        <p style="margin-bottom:10px;">
          <strong style="color:#38bdf8;font-size:18px;">Ø§Ù„Ù…Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù„Ù…ÙŠ:</strong>
          ÙŠØ¹ØªÙ…Ø¯ ØªÙ…Ø«ÙŠÙ„ Ø§Ù„ØµÙˆØª Ø±Ù‚Ù…ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ù…Ø¨Ø¯Ø£ÙŠÙ† Ø£Ø³Ø§Ø³ÙŠÙŠÙ† Ù‡Ù…Ø§
          <strong style="color:#38bdf8;">Ø§Ù„ØªÙ‚Ø·ÙŠØ¹ (Sampling)</strong> Ùˆ
          <strong style="color:#38bdf8;">Ø§Ù„ØªÙƒÙ…ÙŠØ© (Quantization)</strong>.
        </p>
        <p style="margin-bottom:10px;color:#cbd5e1;">
          ÙˆÙÙ‚Ø§Ù‹ Ù„Ù€ <strong style="color:#38bdf8;">Ù†Ø¸Ø±ÙŠØ© Ù†Ø§ÙŠÙƒÙˆÙŠØ³Øª (Nyquist)</strong>ØŒ
          ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† <strong>Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙ‚Ø·ÙŠØ¹</strong>
          Ø¶Ø¹Ù Ø£Ø¹Ù„Ù‰ ØªØ±Ø¯Ø¯ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© Ù„Ø¶Ù…Ø§Ù† Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ø¯Ù‚ÙŠÙ‚Ø© Ø¯ÙˆÙ† ÙÙ‚Ø¯ Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª.
        </p>
        <p style="margin:0;color:#cbd5e1;">
          Ø£Ù…Ø§ <strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ØªØ§Øª (Bit Depth)</strong> ÙÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰
          <strong style="color:#38bdf8;">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¶Ø¬ÙŠØ¬ (SNR)</strong>ØŒ
          Ø­ÙŠØ« Ø¥Ù† ÙƒÙ„ Ø²ÙŠØ§Ø¯Ø© Ø¨Ù…Ù‚Ø¯Ø§Ø± <strong>1 Ø¨Øª</strong>
          ØªÙØ­Ø³Ù‘ÙÙ† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø¨Ù†Ø­Ùˆ <strong style="color:#38bdf8;">6 Ø¯ÙŠØ³ÙŠØ¨Ù„</strong>.
        </p>
      </div>

    </section>

    <!-- Ø³ÙƒØ±Ø¨Øª ØªÙØ§Ø¹Ù„ÙŠ -->
    <script>
      const canvas = document.getElementById('waveCanvas');
      const ctx1 = canvas.getContext('2d');
      const rateSlider = document.getElementById('sampleRate');
      const bitSlider = document.getElementById('bitDepth');
      const rateValue = document.getElementById('rateValue');
      const bitValue = document.getElementById('bitValue');
      const observation = document.getElementById('observation');

      function drawWave(rate, bits) {
        ctx1.clearRect(0, 0, canvas.width, canvas.height);
        const amplitude = canvas.height / 3;
        const mid = canvas.height / 2;
        ctx1.beginPath();
        ctx1.moveTo(0, mid);

        const step = canvas.width / 200;
        for (let x = 0; x < canvas.width; x += step) {
          const freq = 2 * Math.PI * (rate / 44100);
          const y = mid + amplitude * Math.sin(x * freq);
          ctx1.lineTo(x, y);
        }
        ctx1.strokeStyle = '#38bdf8';
        ctx1.lineWidth = 2;
        ctx1.stroke();

        // Ù†Ù‚Ø§Ø· Ø§Ù„ØªÙƒÙ…ÙŠØ© Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©
        const quantStep = Math.pow(2, bits);
        ctx1.fillStyle = '#f97316';
        for (let x = 0; x < canvas.width; x += 25) {
          const freq = 2 * Math.PI * (rate / 44100);
          const y = mid + amplitude * Math.sin(x * freq);
          const qY = Math.round(y / quantStep) * quantStep;
          ctx1.beginPath();
          ctx1.arc(x, qY, 2, 0, 2 * Math.PI);
          ctx1.fill();
        }
      }

      function update() {
        const rate = parseInt(rateSlider.value);
        const bits = parseInt(bitSlider.value);
        rateValue.textContent = rate;
        bitValue.textContent = bits;
        drawWave(rate, bits);

        if (rate < 16000)
          observation.textContent = "Ø¬ÙˆØ¯Ø© Ù…Ù†Ø®ÙØ¶Ø© â€” Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙ…Ø«ÙŠÙ„ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù„ÙŠØ© (ØªØ­Øª Ø­Ø¯ Ù†Ø§ÙŠÙƒÙˆÙŠØ³Øª).";
        else if (bits < 8)
          observation.textContent = "Ø¬ÙˆØ¯Ø© Ù…ØªÙˆØ³Ø·Ø© â€” Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ØªØ§Øª ØªÙ‚Ù„Ù„ Ø§Ù„ØªØ´ÙˆÙŠØ´ Ø§Ù„Ù†Ø§ØªØ¬ Ø¹Ù† Ø§Ù„ØªÙƒÙ…ÙŠØ©.";
        else
          observation.textContent = "Ø¬ÙˆØ¯Ø© Ù…Ø±ØªÙØ¹Ø© â€” ØªÙ…Ø«ÙŠÙ„ Ø¬ÙŠØ¯ Ù„Ù„ØªØ±Ø¯Ø¯Ø§Øª Ù…Ø¹ Ø¶Ø¬ÙŠØ¬ Ù…Ù†Ø®ÙØ¶.";
      }

      rateSlider.addEventListener('input', update);
      bitSlider.addEventListener('input', update);
      drawWave(22050, 8);
    </script>

    <!-- Compression -->
    <section id="compression" class="card" aria-labelledby="comp-title">
      <h2 id="comp-title" class="section-title">ğŸ›ï¸ Ø§ÙÙ‡Ù… Ø¶ØºØ· Ø§Ù„ØµÙˆØª</h2>
      <div class="grid">
        <div>
          <p class="muted">Ø´Ø±Ø­ Ù…Ø¨Ø³Ù‘Ø· Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¶ØºØ·:</p>
          <div style="display:grid;gap:10px;margin-top:12px">
            <div style="background:#021826;padding:12px;border-radius:8px">
              <strong>PCM</strong>
              <div class="muted">ØªØ®Ø²ÙŠÙ† ÙƒÙ„ Ø¹ÙŠÙ†Ø© ÙƒÙ…Ø§ Ù‡ÙŠ â†’ Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©ØŒ Ø­Ø¬Ù… ÙƒØ¨ÙŠØ±.</div>
              <div style="margin-top:6px"><button class="btn" onclick="playCompression('pcm')">Ø§Ø³ØªÙ…Ø¹ PCM</button></div>
            </div>
            <div style="background:#021826;padding:12px;border-radius:8px">
              <strong>DPCM</strong>
              <div class="muted">ØªØ®Ø²ÙŠÙ† Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ø¹ÙŠÙ†Ø§Øª â†’ Ø­Ø¬Ù… Ø£ØµØºØ± Ù…Ø¹ Ø¬ÙˆØ¯Ø© Ø¬ÙŠØ¯Ø©.</div>
              <div style="margin-top:6px"><button class="btn" onclick="playCompression('dpcm')">Ø§Ø³ØªÙ…Ø¹ DPCM</button>
              </div>
            </div>
            <div style="background:#021826;padding:12px;border-radius:8px">
              <strong>Delta Modulation</strong>
              <div class="muted">ØªØ®Ø²ÙŠÙ† Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØªØºÙŠÙŠØ± ÙÙ‚Ø· â†’ Ø­Ø¬Ù… ØµØºÙŠØ±ØŒ Ø¬ÙˆØ¯Ø© Ù…Ù†Ø®ÙØ¶Ø©.</div>
              <div style="margin-top:6px"><button class="btn" onclick="playCompression('delta')">Ø§Ø³ØªÙ…Ø¹ Delta</button>
              </div>
            </div>
          </div>
        </div>
        <div>
          <canvas id="sizeChart" width="400" height="260" style="background:#001820;border-radius:8px"></canvas>
          <div style="color:#9fb9d0;margin-top:8px">Ù…Ø®Ø·Ø· ØªÙˆØ¶ÙŠØ­ÙŠ Ù„Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù Ù…Ù‚Ø§Ø¨Ù„ Ø¬ÙˆØ¯Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ (Ù…Ø­Ø§ÙƒØ§Ø©)</div>
        </div>
      </div>
    </section>

    <footer>
      Â© Ø¬Ø§Ù…Ø¹Ø© â€” Ù…Ø´Ø±ÙˆØ¹ ÙØµÙ„ SVU â€” ØªØµÙ…ÙŠÙ… ÙˆØªÙ†ÙÙŠØ°: [Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø·Ù„Ø§Ø¨]
    </footer>
  </div>

  <script>
    /* ---------- small helpers ---------- */
    function scrollToSection(id) {
      document.querySelector('#' + id).scrollIntoView({ behavior: 'smooth' });
    }

    /* ---------- LAB: sampling & quantization simulation ---------- */
    const srEl = document.getElementById('sampleRate');
    const bdEl = document.getElementById('bitDepth');
    const srVal = document.getElementById('rateValue');
    const bdVal = document.getElementById('bitValue');
    const playBtn = document.getElementById('playBtn');
    const waveCanvas = document.getElementById('waveCanvas');
    const ctx = waveCanvas.getContext('2d');
    let example = 'tone';
    srEl.addEventListener('input', () => { srVal.textContent = srEl.value });
    bdEl.addEventListener('input', () => { bdVal.textContent = bdEl.value });

    function setExample(name) {
      example = name;
      document.getElementById('labNote').textContent = "Ù…Ø«Ø§Ù„: " + (name === 'speech' ? 'Ù…Ù‚Ø·Ø¹ ÙƒÙ„Ø§Ù…ÙŠ' : 'Ù†ØºÙ…Ø© Ù…Ø±ÙƒØ¨Ø©');
    }

    /* generate source buffer (mono) */
    function generateSourceBuffer(lengthSeconds = 2, sampleRate = 44100) {
      const sr = sampleRate;
      const len = Math.floor(lengthSeconds * sr);
      const arr = new Float32Array(len);
      for (let i = 0; i < len; i++) {
        const t = i / sr;
        // choose example
        if (example === 'speech') {
          // synthetic vowel-like short waveform: sum of few sinusoids
          arr[i] = 0.4 * Math.sin(2 * Math.PI * 220 * t) + 0.25 * Math.sin(2 * Math.PI * 440 * t) + 0.08 * Math.sin(2 * Math.PI * 880 * t);
        } else {
          // tone composite: 440 + 880
          arr[i] = 0.5 * Math.sin(2 * Math.PI * 440 * t) + 0.3 * Math.sin(2 * Math.PI * 880 * t);
        }
      }
      // normalize
      let max = 0; for (let v of arr) if (Math.abs(v) > max) max = Math.abs(v);
      if (max > 0) { for (let i = 0; i < arr.length; i++) arr[i] /= max; }
      return { arr, sr };
    }

    /* quantize float32 array to N bits */
    function quantizeArray(floatArr, bits) {
      const levels = Math.pow(2, bits);
      const out = new Float32Array(floatArr.length);
      for (let i = 0; i < floatArr.length; i++) {
        // map [-1,1] -> [0,levels-1]
        const scaled = Math.round(((floatArr[i] + 1) / 2) * (levels - 1));
        // map back
        out[i] = (scaled / (levels - 1)) * 2 - 1;
      }
      return out;
    }

    /* downsample original to simulate lower sampling rate then upsample back (simple) */
    function resampleFloat(arr, srcRate, dstRate) {
      if (srcRate === dstRate) return arr;
      const len = Math.floor(arr.length * dstRate / srcRate);
      const out = new Float32Array(len);
      const ratio = srcRate / dstRate;
      for (let i = 0; i < len; i++) {
        const srcIndex = Math.floor(i * ratio);
        out[i] = arr[srcIndex] || 0;
      }
      return out;
    }

    /* draw original and quantized wave */
    function drawWaves(original, quantized) {
      const w = waveCanvas.width;
      const h = waveCanvas.height;
      ctx.clearRect(0, 0, w, h);
      // top half: original
      ctx.lineWidth = 1.5;
      ctx.strokeStyle = "#60A5FA";
      ctx.beginPath();
      const len = original.length;
      for (let i = 0; i < len; i++) {
        const x = Math.floor(i / len * w);
        const y = (h / 4) * (1 - original[i]) + 10;
        if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
      }
      ctx.stroke();
      // bottom half: quantized
      ctx.lineWidth = 1.2;
      ctx.strokeStyle = "#C084FC";
      ctx.beginPath();
      const lenQ = quantized.length;
      for (let i = 0; i < lenQ; i++) {
        const x = Math.floor(i / lenQ * w);
        const y = (h * 3 / 4) * (1 - quantized[i]) + 10;
        if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
      }
      ctx.stroke();

      // labels
      ctx.fillStyle = "#79bfe0"; ctx.font = "12px Tajawal";
      ctx.fillText("Ø§Ù„Ù…ÙˆØ¬Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©", 8, 14);
      ctx.fillText("Ø¨Ø¹Ø¯ Ø§Ù„ØªÙƒÙ…ÙŠØ©", 8, h * 0.75 + 4);
    }

    /* create audio buffer from Float32Array and play */
    async function playFloatArray(floatArr, sr) {
      ensureCtx();
      const buf = audioCtx.createBuffer(1, floatArr.length, sr);
      buf.getChannelData(0).set(floatArr);
      const src = audioCtx.createBufferSource();
      src.buffer = buf;
      const gain = audioCtx.createGain(); gain.gain.value = 0.12;
      src.connect(gain); gain.connect(audioCtx.destination);
      src.start();
    }

    /* main: process parameters then play and draw */
    async function playProcessed() {
      playBtn.disabled = true; playBtn.textContent = "Ø¬Ø§Ø±Ù Ø§Ù„ØªØ´ØºÙŠÙ„...";
      const srTarget = parseInt(srEl.value, 10);
      const bd = parseInt(bdEl.value, 10);
      // generate high-quality source at 44100
      const source = generateSourceBuffer(2, 44100);
      // resample to target then quantize then upsample to 44100 for playback
      const down = resampleFloat(source.arr, 44100, srTarget);
      const quant = quantizeArray(down, bd);
      // upsample naive (repeat)
      const up = resampleFloat(quant, srTarget, 44100);
      drawWaves(source.arr.slice(0, Math.min(2000, source.arr.length)), up.slice(0, Math.min(2000, up.length)));
      await playFloatArray(up, 44100);
      playBtn.disabled = false; playBtn.textContent = "Ø§Ø³ØªÙ…Ø¹ Ø§Ù„Ø¢Ù†";
    }

    /* ---------- Compression demos (simple algorithms) ---------- */

    /* DPCM: predict previous sample */
    function dpcmEncode(arr, bits) {
      const levels = Math.pow(2, bits);
      const out = new Float32Array(arr.length);
      let prev = 0;
      for (let i = 0; i < arr.length; i++) {
        const diff = arr[i] - prev;
        // quantize diff into limited levels
        const scaled = Math.round(((diff + 1) / 2) * (levels - 1));
        const rec = (scaled / (levels - 1)) * 2 - 1;
        prev = prev + rec;
        out[i] = prev;
      }
      return out;
    }

    /* Delta modulation: binary step up/down by step */
    function deltaMod(arr, step = 0.05) {
      const out = new Float32Array(arr.length);
      let prev = 0;
      for (let i = 0; i < arr.length; i++) {
        const bit = (arr[i] >= prev) ? 1 : -1;
        prev = prev + bit * step;
        out[i] = prev;
      }
      return out;
    }

    /* play compression variant */
    // AudioContext Ù…ÙˆØ­Ù‘Ø¯ Ù…Ø¹ ØªÙØ¹ÙŠÙ„ Ø¨Ø¹Ø¯ Ø£ÙˆÙ„ Ù†Ù‚Ø±Ø©
    let audioCtx;
    function ensureCtx() {
      if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      if (audioCtx.state === 'suspended') {
        const resume = () => { audioCtx.resume(); window.removeEventListener('click', resume); };
        window.addEventListener('click', resume, { once: true });
      }
    }
    async function playCompression(type) {
      ensureCtx();
      const src = generateSourceBuffer(2, 44100);
      let processed;
      if (type === 'pcm') {
        processed = src.arr;
      } else if (type === 'dpcm') {
        processed = dpcmEncode(src.arr, 8); // e.g. 8-bit differences
      } else {
        processed = deltaMod(src.arr, 0.03);
      }
      await playFloatArray(processed, 44100);
    }

    /* ---------- Chart for compression sizes (mock data) ---------- */
    const chartCtx = document.getElementById('sizeChart').getContext('2d');
    const sizeChart = new Chart(chartCtx, {
      type: 'bar',
      data: {
        labels: ['PCM', 'DPCM', 'Delta'],
        datasets: [{
          label: 'Estimated file size (KB)',
          data: [450, 280, 110],
          backgroundColor: ['#60A5FA', '#C084FC', '#7dd3fc']
        }, {
          label: 'Perceived quality (relative)',
          data: [95, 80, 45],
          type: 'line',
          yAxisID: 'y1',
          borderColor: '#cbd5e1',
          fill: false,
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: { beginAtZero: true, position: 'left' },
          y1: { position: 'right', beginAtZero: true, max: 100 }
        },
        plugins: { legend: { labels: { color: '#9fb9d0' } } }
      }
    });

    /* set initial example */
    setExample('tone');

  </script>
</body>

</html>